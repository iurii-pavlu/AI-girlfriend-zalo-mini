# AI Girlfriend Zalo Mini App - Environment Configuration
# Copy this file to .dev.vars for local development

# =============================================================================
# ZNS (Zalo Notification Service) Configuration
# =============================================================================
# Official Zalo Business API for sending notifications
ZNS_API_URL=https://business.openapi.zalo.me/message/template
ZNS_APP_ID=your_zns_app_id_here
ZNS_SECRET_KEY=your_zns_secret_key_here

# =============================================================================  
# ZaloPay Payment Integration
# =============================================================================
# Sandbox environment for testing
ZALOPAY_APP_ID=2553
ZALOPAY_KEY1=your_zalopay_key1_here
ZALOPAY_KEY2=your_zalopay_key2_here  
ZALOPAY_ENDPOINT=https://sb-openapi.zalopay.vn
ZALOPAY_WEBHOOK_SECRET=your_webhook_secret_here

# Production environment (uncomment for production)
# ZALOPAY_ENDPOINT=https://openapi.zalopay.vn

# =============================================================================
# Feature Flags
# =============================================================================
# Enable/disable payments functionality
PAYMENTS_ENABLED=true

# Enable/disable notifications functionality  
NOTIFICATIONS_ENABLED=true

# Enable onboarding for new users
ONBOARDING_ENABLED=true

# =============================================================================
# CORS Configuration
# =============================================================================
# Allowed origins for API access (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,https://miniapp.zalo.me,https://your-domain.pages.dev

# =============================================================================
# AI & Chat Configuration  
# =============================================================================
# OpenAI API for chat functionality
OPENAI_API_KEY=your_openai_api_key_here

# Google Cloud for Text-to-Speech
GOOGLE_CLOUD_API_KEY=your_google_cloud_api_key_here

# =============================================================================
# Monitoring & Analytics
# =============================================================================
# Sentry for error tracking (optional)
# SENTRY_DSN=your_sentry_dsn_here

# Google Analytics tracking ID (optional)
# GA_TRACKING_ID=your_ga_tracking_id_here

# =============================================================================
# Development Settings
# =============================================================================
# Debug mode for verbose logging
DEBUG_MODE=true

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# Security Settings  
# =============================================================================
# JWT secret for session management
JWT_SECRET=your_jwt_secret_here_make_it_long_and_random

# Password salt for hashing
PASSWORD_SALT=your_password_salt_here

# =============================================================================
# Rate Limiting
# =============================================================================
# Requests per minute per IP
RATE_LIMIT_PER_MINUTE=100

# Requests per hour per user  
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# Cron Job Configuration
# =============================================================================
# Evening notification time (24-hour format, Vietnam timezone)
EVENING_NOTIFICATION_HOUR=20
EVENING_NOTIFICATION_MINUTE=05

# Notification window duration in hours
NOTIFICATION_WINDOW_HOURS=2

# =============================================================================
# Business Logic Settings
# =============================================================================
# Free tier message limit per day
FREE_MESSAGE_LIMIT=10

# Referral reward days
REFERRAL_REWARD_DAYS=3

# Maximum referrals per user
MAX_REFERRALS_PER_USER=10

# Subscription prices in VND
WEEKLY_PRICE=49000
MONTHLY_PRICE=149000

# =============================================================================
# Internationalization
# =============================================================================
# Default language for new users
DEFAULT_LANGUAGE=vi

# Supported languages (comma-separated)
SUPPORTED_LANGUAGES=vi,en

# =============================================================================
# Database Configuration
# =============================================================================
# Cloudflare D1 database is configured in wrangler.jsonc
# No additional environment variables needed for D1

# For local development with SQLite
# DATABASE_PATH=./local-database.db

# =============================================================================
# External Services (Optional)
# =============================================================================
# Email service for notifications (SendGrid, Mailgun, etc.)
# EMAIL_SERVICE_API_KEY=your_email_service_key_here
# EMAIL_FROM_ADDRESS=noreply@your-domain.com

# SMS service for backup notifications  
# SMS_SERVICE_API_KEY=your_sms_service_key_here

# Push notification service (Firebase, OneSignal, etc.)
# PUSH_NOTIFICATION_API_KEY=your_push_service_key_here

# =============================================================================
# CDN & Storage Configuration
# =============================================================================
# Cloudflare R2 for file storage (configured in wrangler.jsonc)
# No additional environment variables needed for R2

# Alternative storage providers
# AWS_S3_BUCKET=your_s3_bucket_name
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# =============================================================================
# Performance Settings
# =============================================================================
# Cache TTL in seconds
CACHE_TTL_TRANSLATIONS=3600
CACHE_TTL_USER_PREFERENCES=1800
CACHE_TTL_SUBSCRIPTION_STATUS=600

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10

# =============================================================================
# Development Tools
# =============================================================================
# Enable hot reload in development
HOT_RELOAD=true

# Enable request logging in development  
REQUEST_LOGGING=true

# Enable SQL query logging
SQL_LOGGING=false

# =============================================================================
# Production Overrides
# =============================================================================
# In production, set these values:
# DEBUG_MODE=false
# LOG_LEVEL=warn
# HOT_RELOAD=false
# REQUEST_LOGGING=false
# ZALOPAY_ENDPOINT=https://openapi.zalopay.vn

# =============================================================================
# Setup Instructions
# =============================================================================
# 1. Copy this file to .dev.vars for local development
# 2. Replace all "your_*_here" values with actual credentials
# 3. For production, set these as Cloudflare Pages environment variables:
#    npx wrangler pages secret put SECRET_NAME --project-name your-project
# 4. Ensure wrangler.jsonc has correct D1 database configuration
# 5. Run database migrations: npm run db:migrate:local
# 6. Test configuration: npm run test

# =============================================================================
# Important Security Notes  
# =============================================================================
# - NEVER commit .dev.vars or .env files to git
# - Use different credentials for development/staging/production
# - Rotate secrets regularly, especially API keys
# - Use Cloudflare secrets management for production
# - Enable 2FA on all external service accounts
# - Monitor for unauthorized API usage

# =============================================================================
# Getting API Keys
# =============================================================================
# ZNS (Zalo Notification Service):
#   1. Register at https://developers.zalo.me/
#   2. Create a Zalo Business account
#   3. Apply for ZNS service approval
#   4. Get app_id and secret_key from dashboard

# ZaloPay:  
#   1. Register merchant account at https://zalopay.vn/
#   2. Complete business verification
#   3. Get sandbox credentials for testing
#   4. Apply for production credentials

# OpenAI:
#   1. Create account at https://platform.openai.com/
#   2. Add billing information
#   3. Generate API key with appropriate limits
#   4. Monitor usage to avoid overages

# Google Cloud (for TTS):
#   1. Create project at https://console.cloud.google.com/
#   2. Enable Text-to-Speech API
#   3. Create service account and download key
#   4. Set up billing and quotas